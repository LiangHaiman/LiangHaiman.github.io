<!DOCTYPE html>

<html>

<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />

    <style type="text/css">

    body, html {width: 100%;height: 100%;margin:0;font-family:"微软雅黑";}

    #allmap{width:100%;height:100%;}

    p{margin-left:5px; font-size:14px;}
        
        #allmap img{
            max-width: inherit;
        }
  </style>

    <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=yG53ylhjDtta6wsHWOI9BQgCP50xQGoi"></script>

    <title>初始地图</title>

</head>

<body>

<div id="allmap"></div>

</body>

</html>

<script type="text/javascript" async="asyac">
var map = new BMap.Map("allmap");

var point = new BMap.Point(116.331398,39.897445);

map.centerAndZoom(point,12);

 

var geolocation = new BMap.Geolocation();  //实例化浏览器定位对象。


geolocation.getCurrentPosition(function(r){   //定位结果对象会传递给r变量

    if(this.getStatus() == BMAP_STATUS_SUCCESS){  //通过Geolocation类的getStatus()可以判断是否成功定位。

        var mk = new BMap.Marker(r.point);    //基于定位的这个点的点位创建marker

        map.addOverlay(mk);    //将marker作为覆盖物添加到map地图上

        map.panTo(r.point);   //将地图中心点移动到定位的这个点位置。注意是r.point而不是r对象。

        alert('您的位置：'+r.point.lng+','+r.point.lat);  //r对象的point属性也是一个对象，这个对象的lng属性表示经度，lat属性表示纬度。

    }

    else {

        alert('failed'+this.getStatus());

    }        

},{enableHighAccuracy: true})
</script>